# Mneme 项目评估报告

**评估日期**: 2026-02-07  
**评估基准**: 架构白皮书 `temp.md` + 设计文档 `design.md` v1.0 + `ROADMAP.md`  
**代码版本**: 当前 master 分支

---

## 一、量化概览

| 指标 | 数值 |
|------|------|
| Rust 代码总行数 | 12,123 |
| Crate 数量 | 11 |
| 测试函数总数 | 137 |
| 编译状态 | ✅ 零警告通过 |
| 测试通过 | 129 / 137（8 个因 fastembed 网络超时失败，非代码问题） |
| ROADMAP 已完成项 | 74 / 185（约 40%） |
| 已知未修复 Bug | 5（浏览器阻塞异步运行时、Shell 无权限控制、CLI 光标/中文删除、Memory history leak） |

---

## 二、各 Crate 成熟度评估

| Crate | 代码量 | 测试数 | 评级 | 说明 |
|---|---|---|---|---|
| **mneme_core** | 2,229 | 37 | ⭐⭐⭐⭐⭐ | 状态模型（ODE 动力学）、价值网络、情感系统完备；proptest 覆盖 NaN 注入、极端 dt 等边界 |
| **mneme_reasoning** | 3,276 | 55 | ⭐⭐⭐⭐ | ReAct 循环、工具分发、上下文组装、JSON 多策略解析、输出自然化均已实现；Mock 体系完善 |
| **mneme_memory** | 3,191 | 11 | ⭐⭐⭐ | SQLite + 本地向量搜索 + 事实三元组 + 状态历史 + 整合机制已有；Social Memory 尚未连通 |
| **mneme_limbic** | 1,218 | 19 | ⭐⭐⭐⭐ | `ModulationVector` 结构性调制范式已落地；somatic marker 从"导演模式"成功转向"具身模式" |
| **mneme_expression** | 506 | 9 | ⭐⭐⭐ | 消息拆分、打字延迟、在线状态模拟有基础实现，但缺少语音模态和上下文感知的格式选择 |
| **mneme_cli** | 444 | 0 | ⭐⭐ | rustyline 已集成，可用，但零测试、无自定义 prompt、无命令补全 |
| **mneme_perception** | 393 | 2 | ⭐⭐ | RSS + Web 抓取有基础，但设计文档要求的社交平台 feed（微博、B站等）尚未实现 |
| **mneme_os** | 286 | 1 | ⭐⭐ | Shell 执行可用，但**无任何安全沙箱**——这是当前最大的安全隐患 |
| **mneme_onebot** | 232 | 0 | ⭐ | QQ 协议客户端骨架存在，零测试，未经实际验证 |
| **mneme_browser** | 216 | 3 | ⭐⭐ | headless Chrome 基础可用，有健康检查和会话恢复，但同步 API 阻塞 tokio 运行时 |
| **mneme_voice** | 132 | 0 | ☆ | **纯 trait 定义，无任何具体实现**——STT/TTS 均为空壳 |

---

## 三、架构白皮书对照：仿生控制论有机体实现度

`temp.md`（架构白皮书）定义了比 `design.md` 更深层的理论架构——一个"仿生控制论有机体"。以下逐一评估白皮书各核心概念的代码落地情况。

### 3.0 白皮书核心概念 vs 代码实现

| 白皮书概念 | 理论来源 | 代码实现 | 状态 |
|-----------|----------|---------|------|
| **多尺度动力学** $s=(s_{fast}, s_{medium}, s_{slow})$ | 时间尺度分离 | `FastState` / `MediumState` / `SlowState` + `DefaultDynamics::step_fast/medium/slow_crisis` | ✅ 完整 |
| **System 1: 边缘系统** | Kahneman 快思考, Panksepp 情感回路 | `mneme_limbic` crate: `LimbicSystem` + `SomaticMarker` + `SurpriseDetector` | ✅ 骨架完整 |
| **System 2: 新皮层** | Gazzaniga 解释器 | `mneme_reasoning` crate: `ReasoningEngine` (LLM 驱动) | ✅ 完整 |
| **虚拟躯体** (Virtual Soma) | Cannon 内稳态 | `FastState`: energy, stress, curiosity, social_need + 稳态回归 ODE | ✅ 完整 |
| **Circumplex 情感模型** | Russell 环状模型 | `Affect { valence, arousal }` 二维连续表示 | ✅ 完整 |
| **依恋状态** (Attachment) | Brennan ECR 量表 | `AttachmentStyle { anxiety, avoidance }` + 交互后贝叶斯更新 | ✅ 完整 |
| **预测编码与惊讶** | Friston 自由能原理 | `SurpriseDetector`: 预测设定 + 惊讶分数 + baseline 指数平滑 | ⚠️ 简化版（字符 Jaccard 而非 embedding） |
| **元认知反思** | 双重加工理论 | 触发条件存在（高惊讶/高压力），但反思循环本身未独立实现 | ⚠️ 框架有，循环缺 |
| **注意力瓶颈** | Global Workspace Theory | `ContextAssembler` 6 层优先级 + token 预算裁剪 | ✅ 等效实现 |
| **叙事盲区** (Narrative Blind Spot) | 防解释器过度自信 | 代码中未见显式实现 | ❌ 未实现 |
| **形成性课程** (Formative Curriculum) | Vygotsky 社会文化理论 | 代码中未见书籍阅读/价值内化管道 | ❌ 未实现 |
| **生命叙事** (Life Narrative) | McAdams 叙事认同 | `NarrativeWeaver`: 章节编织 + 主题检测 + 转折点 + 情绪轨迹 | ✅ 完整 |
| **叙事崩塌** (Narrative Collapse) | Dąbrowski 积极分裂 | `step_slow_crisis()`: 崩塌阈值 = rigidity 函数，触发可塑性窗口 | ✅ 完整 |
| **自我同一性韧性** | 白皮书 §5.2 | `SlowState.rigidity`: 随时间信念固化 + 崩塌时临时软化 | ✅ 完整 |
| **动态价值观网络** | 道德多元主义 + 情境伦理 | `HierarchicalValueNetwork` + `RuleBasedJudge` + 层级传播 + 冲突检测 | ✅ 完整（规则基线） |
| **道德代谢成本** | 白皮书 §5.3 | `apply_moral_cost()`: 违背价值观 → stress↑ energy↓ valence↓ | ✅ 完整 |
| **躯体标记（自下而上）** | Damasio somatic marker | `SomaticMarker` → `ModulationVector` → LLM 参数调制 | ✅ 完整（已升级为结构性调制） |
| **反馈缓冲池（自上而下）** | 白皮书 §6.2 防认知偏差固化 | `FeedbackBuffer`: 不确定性折扣 + 时间平滑 + 模式聚合 | ✅ 完整 |
| **睡眠整合** (Sleep Consolidation) | 离线巩固 | `SleepConsolidator`: 凌晨执行 + buffer 批处理 → state updates | ✅ 完整 |
| **边缘系统神经网络** (Burn/Candle) | 白皮书 §3.1 在线学习 | 代码中**未引入**任何 ML 框架，`F` 函数仍为手写 ODE | ❌ 未实现 |
| **主观诠释循环** (Hermeneutic Circle) | 白皮书 §5.1 路径依赖的价值内化 | 代码中无书籍阅读→反思→价值更新的管道 | ❌ 未实现 |

### 3.1 白皮书实现度评分

| 类别 | 完成项 | 总项 | 完成率 |
|------|--------|------|--------|
| 多尺度动力学 | 3/3 | 3 | 100% |
| System 1 (边缘系统) | 5/7 | 7 | 71% |
| System 2 (新皮层) | 3/5 | 5 | 60% |
| 价值系统与道德 | 4/5 | 5 | 80% |
| 系统耦合 | 3/3 | 3 | 100% |
| **总计** | **18/23** | **23** | **78%** |

**白皮书的核心理论框架已有 78% 在代码中落地。** 最大的缺失是：边缘系统的神经网络替换（仍用手写 ODE）、元认知反思循环的完整实现、叙事盲区机制、以及形成性课程（书籍阅读→价值内化）管道。

---

## 四、设计文档对照：系统边界完成度

`design.md` 定义了五大系统边界。逐一评估：

### 3.1 Perception（感知）

| 设计要求 | 状态 | 说明 |
|----------|------|------|
| 统一内容模型 `ContentItem` | ⚠️ | 基础字段有，但缺 reply chain、thread ID、modality metadata |
| 会话类源（QQ/OneBot） | ⚠️ | 骨架代码存在，零测试，未实战验证 |
| 社交 Feed 源（微博、B站） | ❌ | 仅有 trait 定义和 RSS 通用实现 |
| Web 抓取 | ✅ | 含 SSRF 防护 |
| 源可扩展性 | ⚠️ | `Source` trait 存在，但没有"从配置自动发现加载"机制 |

**完成度：约 30%**

### 3.2 Memory（记忆）

| 设计要求 | 状态 | 说明 |
|----------|------|------|
| Episodic Memory（事件记忆） | ✅ | SQLite + 本地 embedding 向量搜索（线性扫描 top-1000） |
| Semantic Memory（语义记忆） | ✅ | 事实三元组 store/recall/decay/format + 对话后自动 extraction |
| Social Memory（社交记忆） | ⚠️ | `SocialGraph` trait + 数据库表存在，但未连通到 recall 管道 |
| Blended Recall（混合召回） | ⚠️ | 只返回 episodes + facts，不包含 social context |
| 向量 ANN 索引 | ❌ | 线性扫描，无 HNSW/IVF，万级 episode 后性能退化 |
| 存储后端可替换 | ✅ | `Memory` trait 抽象，SQLite 为默认实现 |

**完成度：约 65%**

### 3.3 Reasoning（推理）

| 设计要求 | 状态 | 说明 |
|----------|------|------|
| ReAct 事件循环 | ✅ | 完整实现，含递归限制 |
| Context Assembly 6 层优先级 | ✅ | persona → user facts → feed digest → episodes → history → event，全部完成 |
| Token 预算管理 | ⚠️ | `context_budget_factor` 调制存在，但无日/周/月预算追踪 |
| LLM 后端可替换 | ✅ | `LlmClient` trait，Anthropic + OpenAI 两个 provider |
| 流式输出 | ❌ | 完全缓冲后处理 |
| 工具注册系统 | ❌ | 硬编码 `vec![]` + `match` 分发，非 registry 模式 |
| Proactive Reasoning | ⚠️ | 触发器框架有，但完整的主动行为循环未实现 |
| Fact extraction pass | ✅ | 对话后自动提取事实，集成到 think() 循环 |

**完成度：约 60%**

### 3.4 Expression（表达）

| 设计要求 | 状态 | 说明 |
|----------|------|------|
| 打字延迟 + 阅读延迟 | ✅ | 含随机抖动 |
| 消息拆分（中文标点感知） | ✅ | 按自然断句拆分 |
| 模态选择（文字/语音/表情） | ❌ | 仅支持文字 |
| 在线状态模拟（作息时间） | ✅ | 可配置活跃/睡眠时段 |
| 语音管道（STT + TTS） | ❌ | 纯 trait，无实现 |
| 输出自然化后处理 | ✅ | `sanitize_chat_output()` 剥离 AI 味格式 |

**完成度：约 45%**

### 3.5 Agency（自主能力）

| 设计要求 | 状态 | 说明 |
|----------|------|------|
| Capability 四级权限 | ❌ | 完全未实现，Shell 可执行任意命令 |
| 工具 Registry | ❌ | 硬编码 |
| 路径沙箱 | ❌ | 无 |
| 网络域名白名单 | ❌ | 无 |
| 审计日志 | ❌ | 无 |
| 主动行为循环 | ❌ | 无 |
| 目标系统 | ❌ | 无 |

**完成度：约 5%**（仅有工具执行的基础代码）

---

## 四、版本里程碑进度

| 版本 | 定位 | 状态 | 关键差距 |
|------|------|------|----------|
| **v0.2.0** | 核心管道闭环 | ✅ 完成 | — |
| **v0.3.0** | 稳定性与可测试 | ✅ 完成 | — |
| **v0.4.0** | 安全与架构 | ❌ 未开始 | 安全沙箱、工具注册、Token 预算、统一配置 |
| **v0.5.0** | 学习与个性化 | ❌ 未开始 | 反馈持久化、流式输出、ANN 索引、可观测性 |
| **v0.6.0** | Agency | ❌ 未开始 | 主动行为循环、目标系统、自主工具使用 |
| **v1.0.0** | 成熟版本 | ❌ 未开始 | 元认知、神经网络替换、多用户 |

**当前进度约在 v0.3.0 完成阶段，总工程量约完成 35-40%。**

---

## 五、关键风险与阻断项

### 🔴 P0 — 上线前必须解决

1. **安全沙箱完全缺失**。`LocalShell::execute()` 可运行任意命令（包括 `rm -rf /`），无路径白名单、无命令过滤、无权限分级。在任何非开发者环境中运行都有严重安全风险。

2. **Token 成本不可控**。无预算追踪、无消耗限制。一旦启用主动行为（设计文档的核心愿景），月成本可能达 $50-200+，且无降级机制。

### 🟡 P1 — 严重影响核心体验

3. **Agency = 零实现**。设计文档将 Agency 列为五大系统边界之一，但代码中完全被动——只响应用户输入，无主动行为循环、无目标系统、无自主探索。这是"AI agent"与"聊天机器人"的根本区别。

4. **Social Memory 断路**。`SocialGraph` trait、数据库表都有，但 `recall()` 不返回社交上下文。设计文档 §4.1 描述的"连接不同平台的人物关系"能力形同虚设。

5. **向量搜索无索引**。线性扫描 top-1000 episodes，O(n) 复杂度。万级 episode 后延迟将不可接受——而一个"记住一切"的 agent 积累万级 episode 只需数周。

### 🟢 P2 — 影响扩展性和工程质量

6. **工具系统硬编码**。添加新工具要改 `tools.rs` + `engine.rs` 两处核心代码，与设计文档 §5.4/§7.2 的 registry 模式不符。

7. **流式输出缺失**。LLM 完全缓冲后才发送，长回复时用户等待时间长，损害"类人感"。

8. **语音管道空壳**。设计文档 Phase 4 的 STT/TTS 仅有 trait 定义，无任何 provider 实现。

9. **配置管理原始**。环境变量散落各处，无统一配置文件、无校验、无热重载。

10. **`headless_chrome` 阻塞异步运行时**。同步 API 在 tokio 上下文中直接调用，可能导致其他异步任务饥饿。

---

## 六、亮点与创新

以下方面值得充分肯定（综合 `temp.md` 白皮书和 `design.md` 评估）：

1. **结构性 LLM 调制（`ModulationVector`）**。这是整个项目最有洞见的设计——不是用文字"告诉" LLM 要有什么情绪，而是通过调制 `max_tokens`、`temperature`、上下文预算等参数，让行为从结构性约束中涌现。ROADMAP 中"杏仁核不给前额叶发备忘录——它改变神经递质水平"的类比精准地抓住了问题本质。**目前这个范式转变已经在代码中落地。**

2. **生物启发的状态模型**。用 ODE 动力学系统（`dynamics.rs`）模拟能量/压力/情绪的连续演化，而非离散状态机。包含稳态吸引、外部刺激响应、衰减等机制，这比大多数"给 AI 加情绪"的项目都严肃得多。

3. **6 层上下文组装优先级**。`ContextAssembler` 严格按 persona → user facts → feed digest → episodes → history → event 的优先级组装，配合 token 预算裁剪。这在工程上比简单的"把所有东西塞进 prompt"优雅得多。

4. **输出自然化的三层防御**。few-shot persona 示例 + 极简 system prompt + 确定性后处理（`sanitize_chat_output()`），最后一层保证了即使 LLM 不配合也能剥离 AI 味格式。

5. **属性测试覆盖**。41 个 proptest 测试覆盖 ODE 稳定性、NaN 注入恢复、ModulationVector 边界、sanitize 幂等性等，这在个人项目中很少见。

6. **JSON 解析 6 层 fallback**。直接解析 → code block 提取 → balanced braces → bare array → JSON repair → graceful empty，对 LLM 输出格式的不确定性做了充分防御。

---

## 七、科学视角评论

> *以下评论从认知科学、计算神经科学和 AI 系统设计的角度出发，综合评估 `temp.md` 架构白皮书的理论深度及其代码落地情况。*

### 8.1 架构哲学：走在正确的方向上，且有罕见的理论自觉

Mneme 的核心洞见——**LLM 是无状态的"新皮层"，情绪和人格应来自皮层下结构的结构性调制**——在计算神经科学中有扎实的理论基础。

`temp.md` 白皮书的理论引用密度在个人项目中极为罕见：Kahneman 的双重加工、Panksepp 的情感回路、Russell 的 Circumplex 模型、Brennan 的 ECR 量表、Friston 的自由能原理、Damasio 的躯体标记、Gazzaniga 的解释器模块、McAdams 的叙事认同、Dąbrowski 的积极分裂、Vygotsky 的社会文化理论——**这不是堆砌参考文献，而是每一个引用都有对应的代码结构**：Russell → `Affect { valence, arousal }`，Brennan → `AttachmentStyle { anxiety, avoidance }`，Dąbrowski → `step_slow_crisis()` + rigidity 临时软化窗口，Damasio → `SomaticMarker → ModulationVector`。理论到工程的映射链条是完整的。

Antonio Damasio 的 somatic marker hypothesis（躯体标记假说）认为，情绪不是理性的对立面，而是决策的必要组成部分：前额叶的"理性"决策依赖于来自躯体的情感信号。Mneme 的 `SomaticMarker → ModulationVector → LLM 参数调制` 管道，是这一理论在 AI 系统中最忠实的工程映射之一。

多数"情感 AI"项目的做法是在 system prompt 里写"你现在很开心"——这等价于给大脑皮层一张纸条。**Mneme 的做法是改变"神经递质水平"**（max_tokens、temperature、context budget），让行为自然涌现。这不仅是工程上的改进，更是认知建模范式的正确选择。

### 8.2 多尺度动力学：时间尺度分离是关键正确决策

白皮书提出的 $s = (s_{fast}, s_{medium}, s_{slow})$ 三层时间尺度分离，在代码中得到了忠实实现：

- **秒级** `FastState`：energy, stress, affect, curiosity, social_need → 对即时刺激反应
- **小时级** `MediumState`：mood_bias, openness, hunger, attachment → 积分 fast 的均值
- **长期** `SlowState`：values, rigidity, narrative_bias → 仅在 crisis 时阶跃变化

这个设计远优于简单的 `if energy < 0.3 then tired` 式离散规则。连续系统能自然地表达：

- **惯性**——情绪不会瞬间跳变
- **稳态回归**——偏离后自然恢复
- **层间耦合**——stress 长期居高不下才会拖垮 mood（不是一次争吵就抑郁）
- **信念固化**——`rigidity` 随时间增长，模拟了认知"老化"

代码中 `step_medium()` 用 `dt_hours` 做时间缩放、`step_slow_crisis()` 用 rigidity 做崩塌阈值，正确地反映了白皮书的数学模型。

但当前的 ODE 参数（`energy_target: 0.7`、`stress_decay_rate: 0.002` 等）是手动选定的，缺乏来自真实交互数据的校准。白皮书设想用 Burn/Candle 神经网络替代手写 ODE（§3.1），但这一步尚未开始。

**建议**：在当前阶段，与其追求"可学习参数"，不如先建立一个系统化的 **parameter sensitivity analysis**——哪些参数对最终行为影响最大？哪些可以安全地设为常量？这能大幅缩小后续学习空间。

### 7.3 从规则到涌现：路径正确，但"涌现"不等于"不可控"

ROADMAP 描述的四阶段路径（硬编码规则 → 可调参数 → 在线微调 → 神经网络替换）是合理的渐进策略。但需要注意一个深层张力：

**涌现行为的可解释性问题**。当 `stress=0.8` 导致 `temperature+0.3, max_tokens×0.5`，我们还能解释为什么 agent 说了某句话。但当调制曲线由神经网络输出时，这种可解释性将大幅下降。对于一个与用户建立"亲密关系"的 agent，不可解释的行为突变可能严重损害信任。

**建议**：在学习管道中保留"可审计"约束——任何时候都能回答"为什么 agent 在这个状态下做了这个行为"。可考虑限制神经网络只调节调制曲线的**参数**（斜率、拐点），而非替换整个映射函数，这样既有适应性又保留可解释性。

### 8.4 反馈缓冲池：白皮书最精彩的安全机制之一

白皮书 §6.2 提出的"自上而下缓冲反馈"是整个架构中最有洞见的安全设计之一——它直面了一个几乎所有情感 AI 项目都忽视的问题：**如果 System 2 (LLM) 产生了一个错误的自我解释，System 1 信以为真并据此调整参数，就会形成认知偏差固化的正反馈环**。

代码中 `FeedbackBuffer` 实现了白皮书要求的三重防护：

1. **不确定性折扣**（`confidence_threshold: 0.6`）——低置信度信号直接丢弃
2. **时间平滑**（`pattern_threshold: 3`）——同一模式出现 3 次以上才计入
3. **睡眠整合**（`SleepConsolidator`）——真正的参数更新在"凌晨 2-6 点"批处理

这模拟了生物大脑的离线巩固（Offline Consolidation）机制。但当前存在一个缺口：**反馈信号只在内存中，进程重启就丢失**（ROADMAP #5）。对于一个需要长期运行的有机体，这等于每次重启都丧失了一天的学习素材。

### 8.5 叙事系统：McAdams 理论的优秀实现，但缺少"叙事盲区"

白皮书 §5.2 的生命叙事系统在代码中实现得相当完整：`NarrativeWeaver` 能从 episode 中检测主题、识别情绪转折点、编织自传章节、检测叙事危机。`step_slow_crisis()` 中 rigidity 临时软化（`*= 0.7`）模拟了 Dąbrowski 积极分裂中的"可塑性窗口"——这是一个非常精细的设计。

但白皮书 §4.5 定义的 **叙事盲区**（Narrative Blind Spot）尚未实现。这个机制要求：当 System 2 试图为内部状态波动编造理由但置信度低于阈值时，**强制中断解释**，让 agent 说"我不知道为什么，但我今天就是感觉有点低落"。

这不是一个可有可无的功能——它是防止 agent 变成"过度理性化的机器人"的关键安全阀。人类的魅力之一就是承认"我也不知道为什么"。缺少这个机制，agent 的每一次情绪波动都会被强行合理化，反而**更不像人**。

### 8.6 记忆系统：三系统模型有理论支撑，但缺少关键的"遗忘"

Episodic / Semantic / Social 三分法大致对应认知心理学中 Tulving 的记忆分类。当前实现的亮点是**事实衰减**（`decay_fact()`）和**叙事整合**（`consolidation.rs`），这符合人类记忆的重建性本质——我们不是检索录像带，而是每次回忆都在重构。

但当前缺少一个关键机制：**有选择性的遗忘**。人类的遗忘不是 bug，而是认知系统的核心功能——它过滤噪音、泛化经验、保护心理健康。当前的实现倾向于"记住一切"（所有 episode 永久存储），这会导致：

1. 向量搜索中老旧/无关记忆产生噪音
2. 上下文窗口被低价值记忆挤占
3. 无法模拟"选择性遗忘"这一重要的人格特征（有些人记仇、有些人大大咧咧）

**建议**：引入 episode 级别的**重要性衰减**——不常被召回的 episode 其搜索权重逐渐降低（类似 ACT-R 认知架构中的 base-level activation decay）。衰减速率可以成为又一个个性参数。

### 8.7 "个体差异来源"：白皮书的路径依赖超越了纯参数化

白皮书 §5.1 提出了一个非常深刻的概念——**主观诠释循环**（Hermeneutic Circle）：同一本《小王子》，一个乐观的 Mneme 会强化 innocence，一个愤世嫉俗的 Mneme 反而会得出"纯真不堪一击"的结论。**成长是路径依赖的**——之前的经历决定如何理解现在的输入，而现在的理解又重塑未来的性格。

这个洞见超越了 ROADMAP 列出的 6 种个体差异来源。白皮书不仅关注"参数不同"，还关注**解释框架不同**——同一输入经过不同的 $s_{slow}$ 过滤后产生不同的梯度信号。

可惜，这个概念在代码中**完全未实现**。没有"书籍阅读→反思→价值更新"的管道，没有当前状态偏置解释过程的机制。这是白皮书最具原创性的想法之一，值得优先实现。

认知科学告诉我们，**个体差异不仅来自参数不同，还来自结构不同**：

- 一个"高创造性"个体可能不只是 `temperature` 更高，而是有**不同的记忆召回策略**（更远的语义跳跃）
- 一个"内向"个体可能不只是 `social_need` 更低，而是有**不同的上下文过滤逻辑**（更关注事物而非人）
- 一个"焦虑"个体可能不只是 `stress_decay_rate` 更慢，而是有**不同的注意力偏向**（威胁相关刺激被放大）

**建议**：白皮书的 Hermeneutic Circle 概念天然支持这种结构性差异——不同的 $s_{slow}$ 不只是改变参数，而是改变**解释路径**。这比纯参数化更接近真实的神经多样性。优先实现这个管道，哪怕先从简单的"阅读后 LLM 生成反思 → 反思结果更新价值权重"开始。

### 8.8 白皮书的未实现遗珠

白皮书中以下概念尚未进入代码，但极具价值，值得特别标注：

1. **边缘系统神经网络**（§3.1）：白皮书设想用 Burn/Candle 实现可在线学习的 $F$ 函数，当前仍为手写 ODE。这是从 Bootstrap 到成熟期的关键跳跃，但也是工程量最大的一步。建议先做参数敏感性分析，再决定哪些映射值得用神经网络替换。

2. **叙事盲区**（§4.5）：System 2 解释失败时的强制中断。实现成本很低（在 `think()` 中检测 LLM 自信度低于阈值时注入"我不确定为什么"的倾向），但对"像人"程度的提升很大。

3. **形成性课程**（§5.1）：书籍阅读 → 主观诠释 → 价值更新。这是让 Mneme 拥有"文化根基"的路径。可以先用"每日阅读一段经典文本 → LLM 生成读书笔记 → 提取价值信号 → 注入 FeedbackBuffer"的简单管道实现。

4. **反馈缓冲持久化**（§6.2 完整版）：当前 `FeedbackBuffer` 只在内存中，需要持久化到 SQLite 才能真正实现跨重启的"睡眠学习"。

### 8.9 总体评价

Mneme 是一个**认真对待认知建模的 AI agent 项目**。它没有走"在 LLM 外面套一层 prompt engineering"的捷径，而是构建了一个有内在动力学、有记忆整合、有结构性行为调制的架构。

从科学严谨性来看：
- **理论基础**：`temp.md` 白皮书引用了 10+ 位认知科学/心理学家的核心理论，且每个引用都有对应代码结构 → **在个人项目中极为罕见的理论深度**
- **工程映射**：Damasio → `ModulationVector`，Russell → `Affect { valence, arousal }`，Dąbrowski → `step_slow_crisis()`，McAdams → `NarrativeWeaver` → **准确且非比喻性的**
- **白皮书落地率**：23 个核心概念中 18 个已有代码实现（78%）→ **高**
- **实验验证**：尚无系统化的行为评估或用户研究 → **缺失**

**最大的风险不是代码完成度，而是"好架构 + 没有评估 = 不知道是否真的有效"**。ODE 参数是否产生了主观上可感知的行为差异？ModulationVector 调制是否真的比纯文字 prompt 更有效？这些问题需要设计实验来回答，而不能仅靠直觉判断。

建议在 v0.4-v0.5 阶段引入一个**系统化的行为评估框架**：固定一组对话场景，在不同状态（高压力/低能量/高好奇心等）下生成回复，由人类评估者判断回复是否"符合该状态下的预期行为"。这比任何单元测试都更能验证核心假设。

---

## 八、总结

| 维度 | 评分 | 说明 |
|------|------|------|
| **架构设计** | 9/10 | 白皮书理论深度罕见，10+ 认知科学理论均有代码对应 |
| **理论-代码映射** | 8.5/10 | 白皮书 23 个核心概念中 18 个已落地（78%），映射准确 |
| **代码质量** | 8/10 | 编译零警告，137 测试，proptest 覆盖边界 |
| **功能完成度** | 4/10 | 核心管道跑通，但安全/Agency/学习/语音均未实现 |
| **可上线程度** | 2/10 | 安全沙箱缺失是阻断性问题 |
| **科学严谨性** | 7.5/10 | 理论和工程映射优秀，但缺少实验验证和行为评估框架 |
| **文档质量** | 9.5/10 | 白皮书 + 设计文档 + ROADMAP 三层文档异常详尽 |

**一句话总结**：Mneme 拥有一套在个人项目中极为罕见的、有严肃认知科学基础的仿生架构。白皮书（`temp.md`）定义了一个"数字有机体"的完整蓝图，从 Damasio 的躯体标记到 Dąbrowski 的积极分裂，每一个理论引用都在代码中找到了对应结构。但目前只建好了约 35-40% 的工程量——它是一个**有灵魂的半成品**。灵魂（架构白皮书 + 多尺度动力学 + 结构性 LLM 调制 + 反馈缓冲安全机制 + 叙事系统）已经到位且质量很高，但肉身（安全沙箱、Agency、学习管道、形成性课程、平台对接）还需要大量建设。

---

*本评估由 AI 基于代码审查、测试执行和设计文档对照完成。*
